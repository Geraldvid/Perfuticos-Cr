<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Carrito</title>
    <link rel="stylesheet" href="css/Carrito.css">
</head>
<body>
    

    <script>
        const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
        const lista = document.getElementById('lista-carrito');
        let total = 0;

        carrito.forEach(item => {
            const p = document.createElement('p');
            p.textContent = `${item.nombre} - ${item.cantidad} - ¢${item.precio}`;
            lista.appendChild(p);
            total += parseInt(item.precio);
        });

        document.getElementById('total').textContent = `Total: ¢${total}`;
    </script>
    
    

<div id="factura" class="factura-container">
  <h2>Tu carrito de perfumes</h2>
  <ul id="lista-productos"></ul>
  <div id="detalle-costos" style="margin-top: 10px;"></div>
</div>


<button id="btn-vaciar">
    Vaciar Carrito
    </button>
   
<div id="preview"></div>
<!-- Botón para mostrar el formulario de ayuda -->
<button onclick="mostrarFormulario()" class="boton-guia">¿Cómo generar y enviar la factura?</button>

<button onclick="generarYPrevisualizar()">Generar factura como imagen</button>
<button id="whatsappBtn" style="display:none;">Enviar por WhatsApp</button>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
function generarYPrevisualizar() {
    const factura = document.getElementById('factura');

    html2canvas(factura).then(canvas => {
        const imgData = canvas.toDataURL('image/png');

        // Mostrar previsualización
        const previewDiv = document.getElementById('preview');
        previewDiv.innerHTML = '';
        previewDiv.appendChild(canvas);

        // Crear botón de descarga
        let link = document.createElement('a');
        link.download = 'factura.png';
        link.href = imgData;
        link.textContent = 'Descargar imagen';
        link.className = 'boton-descarga';
        previewDiv.appendChild(link);

        // Mostrar botón de WhatsApp
        document.getElementById('whatsappBtn').style.display = 'inline-block';
    });
}

document.getElementById('whatsappBtn').addEventListener('click', () => {
    const mensaje = encodeURIComponent(
`Hola, adjunto mi pedido.

Realizar el sinpe al siguiente numero 6180-9115 a nombre Lorenzo Vargas Guido

Por favor llenar estos datos!!

Nombre completo:
Número de cédula:
Número de celular:

Provincia:
Cantón:
Distrito:

Ubicación exacta:
Por favor llenar estos datos!!`

    );
    window.open(`https://wa.me/50663150332?text=${mensaje}`, '_blank');
});

</script>


   <a href="catalogo.html">Volver a Catalogo</a>

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script type="module" src="js/script.js"></script>


    

<!-- Modal con los pasos -->
<div id="modalGuia" class="modal">
  <div class="modal-contenido">
    <span class="cerrar" onclick="cerrarFormulario()">&times;</span>
    <h2>Pasos para generar y enviar tu factura</h2>
    <ol>
      <li>Revisa los productos en tu carrito.</li>
      <li>Verificar si tienes regalia. Si la tienes vuelve a catalogo y te saldra la opcción de reclamarla</li>
      <li>Haz clic en <strong>"Generar factura como imagen"</strong>.</li>
      <li>Se mostrará una previsualización y un botón para <strong>descargar</strong> la imagen.</li>
      <li>Luego haz clic en <strong>"Enviar por WhatsApp"</strong> para compartirla.</li>
      <li>Y Por favor llenar estos datos que se solicita en el mensaje </li>
    </ol>
    <p>¡Asegúrate de tener WhatsApp Web abierto si estás desde computadora!</p>
  </div>
</div>
<script>
function mostrarFormulario() {
    document.getElementById("modalGuia").style.display = "flex";
}

function cerrarFormulario() {
    document.getElementById("modalGuia").style.display = "none";
}

// Cierra el modal al hacer clic fuera del contenido
window.onclick = function(event) {
    const modal = document.getElementById("modalGuia");
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
</script>

<footer class="footer">
  <div class="footer-container">
    <div class="footer-branding">
      <h2>Nexovate</h2>
      <p>Desarrollamos soluciones digitales a medida para tu negocio. Hecho por Nexovate.</p>
    </div>

    <!-- <div class="footer-links">
      <h3>Enlaces</h3>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="catalogo.html">Catálogo</a></li>
        <li><a href="contacto.html">Contacto</a></li>
        <li><a href="https://wa.me/506XXXXXXXX">WhatsApp</a></li>
      </ul>
    </div>

    <div class="footer-contact">
      <h3>Contacto</h3>
      <p>Email: <a href="mailto:contacto@nexovate.com">contacto@nexovate.com</a></p>
      <p>Tel: +506 8888-8888</p>
      <p>Ubicación: Costa Rica</p>
    </div>
  </div> -->
  
  <div class="footer-bottom">
    <p>&copy; 2025 Nexovate. Todos los derechos reservados.</p>
  </div>
</footer>
</body>
</html>